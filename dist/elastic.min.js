/*! Elastic.js - v0.0.0 ( 2013-04-30 ) - MIT */
(function(){"use strict";function t(t,e){for(var n,o=0,r=Object.keys(e),i=r.length;i>o;o++)n=r[o],t[n]=e[n];return t}function e(e,n){var o,r,i;return o=e,n.hasOwnProperty("constructor")?(r=n.constructor,delete n.constructor,i=n):"[object Function]"===Object.prototype.toString.call(n)?(r=n,i=n.prototype):(r=s(o),i=n),t(r,o),r.prototype=Object.create(o.prototype),r.prototype.constructor=r,t(r.prototype,i),r.__super__=o.prototype,r.__super__.constructor=o,r.prototype.super=c(r),r}function n(e,n){var s;1===arguments.length?n=e:s=e;var c="function"==typeof s?s:n.hasOwnProperty("constructor")?n.constructor:function(){};return delete n.constructor,t(c.prototype,n),c.extends=o,Object.defineProperty(c,"extends",u),c.with=r,Object.defineProperty(c,"with",u),c.create=i,Object.defineProperty(c,"create",u),c}function o(t,n){return 1===arguments.length?n=t:n.constructor=t,e(this,n)}function r(e,n){var o,r=0,i=Object.keys(e),s=i.length,c={};for(n||(n={});s>r;r++)o=i[r],n[o]?c[n[o]]=e[o]:c[o]=e[o];return t(this.prototype,c),this}function i(){var t=Object.create(this.prototype);return this.apply(t,arguments),t}function s(t){return function(){return t.apply(this,arguments)}}function c(t){return function(e,n){return t.__super__[e].apply(this,n)}}var u={writable:!1},a="__UNDEFINED__",h={of:n,mix:t,inherits:e},f=h.of({type:a,constructor:function(t){if(this.type===a)throw new l("You must specify a unique type for the Exception");this.error=Error(t),this.error.name=this.type+"Exception"},getMessage:function(){return this.error.message},getTraceAsString:function(){return this.error.stack},toString:function(){return""+this.error}}),l=f.extends({type:"Logic"}),p=f.extends({type:"Runtime"}),g=h.of({el:null,$el:null,_selector:function(t){var e;return e="#"===t.charAt(0)?document.getElementById(t.slice(1)):document.querySelector(t)},_element:function(t){this.el=t,window.$&&(this.$el=$(this.el))},onCreate:function(){},onDestroy:function(){}}),d=g.extends({events:{},ui:{},handleEvent:function(){}}),y=g.extends({}),m=g.extends({name:a,regions:{},_assignedMap:{},constructor:function(e){if(this.name===a)throw new l("You must specify a unique name for the Layout");e||(e={}),e.regions&&(this.regions=t(e.regions,this.regions)),"string"==typeof this.el&&this._element(this._selector(this.el)),this.onCreate()},assign:function(t,e){var n,o,r;if(n=this.regions[t],r=this.getRegionView(t),!n)throw new l("Could not get a selector from the region "+t);o=this._selector(n),this.onChange(t,e,r),r instanceof w&&r.destroy(),e.attachElement(o),this._assignedMap[t]=e},getRegionView:function(t){if(!t in this.regions)throw new l("Undefined region `"+t+"` is specified");return this._assignedMap[t]||null},withdraw:function(t){var e;return e=this.getRegionView(t),e instanceof w&&(e.detachElement(),this._assignedMap[t]=null),e},destroy:function(){this.onDestroy();for(var t,e=0,n=Object.keys(this.regions),o=this.regions.length;o>e;e++)t=n[e],this.withdraw(t).destroy()},onChange:function(){}}),w=g.extends({name:a,events:{},ui:{},components:{},constructor:function(){if("string"==typeof this.el&&this._element(this._selector(this.el)),this.name===a)throw new l("You must specify a unique name for the View");this.onCreate()},attachElement:function(t){this._element(t),this.onAttach(t),this.delegateEvents()},detachElement:function(){this.el=this.$el=null,this.onDetach(),this.undelegateEvents()},delegateEvents:function(){},undelegateEvents:function(){},dispatchComponent:function(){},use:function(t,e){this.components[t]=e},destroy:function(){this.onDestroy()},onAttach:function(){},onDetach:function(){}}),_={},v={},E=h.of({constructor:function(){}}),b=h.of({constructor:function(){}}),x=h.of({constructor:function(){}}),O=h.of({constructor:function(){}});window.Elastic={klass:h,domain:{Layout:m,View:w,Compontnt:d,Element:y},exception:{Runtime:p,Logic:l},util:{History:E,Router:b,Storage:x,Validator:O},trait:{AsyncCallback:_,Observable:v}},"function"==typeof window.define&&"object"==typeof window.define.amd&&window.define(function(){return window.Elastic})})();